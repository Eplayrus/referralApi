#  **Документация к API реферальной системы**

##  **Описание**
Этот API предоставляет функциональность реферальной системы, позволяя пользователям создавать и управлять реферальными кодами, регистрироваться по ним и отслеживать рефералов.

---
##  **Технологический стек**
- **Python** + **Django REST Framework**
- **JWT/OAuth 2.0** (для аутентификации)
- **SQLite/PostgreSQL/MySQL** (на выбор)
- **Swagger/ReDoc** (для API-документации)

---

##  **Аутентификация**
API использует аутентификацию `JWT/OAuth 2.0`. Для доступа к защищённым эндпоинтам требуется передача токена в заголовке `Authorization: Bearer <токен>`.

---

#  **1. Пользователи**
## **?? Регистрация пользователя**
**`POST /register/`**  
Регистрация нового пользователя.

###  **Запрос**
```json
{
  "username": "user123",
  "email": "user@example.com",
  "password": "securepassword"
}
```
###  **Ответ (201 Created)**
```json
{
  "id": 1,
  "username": "user123",
  "email": "user@example.com"
}
```

---

#  **2. Реферальные коды**
## **?? Получить реферальный код**
**`GET /referral-code/`**  
Получение реферального кода текущего пользователя.

###  **Ответ (200 OK)**
```json
{
  "user": 1,
  "code": "123abcXYZ",
  "expires_at": "2025-12-31T23:59:59Z"
}
```

## ** Создать реферальный код**
**`POST /referral-code/`**  
Создание нового реферального кода.

###  **Запрос**
```json
{
  "expires_at": "2025-12-31T23:59:59Z"
}
```

###  **Ответ (201 Created)**
```json
{
  "user": 1,
  "code": "abc123XYZ",
  "expires_at": "2025-12-31T23:59:59Z"
}
```

## ** Удалить реферальный код**
**`DELETE /referral-code/`**  
Удаление текущего реферального кода.

### ?? **Ответ (204 No Content)**
```json
{
  "detail": "Реферальный код удален."
}
```

---

# ?? **3. Рефералы**
## **?? Регистрация по реферальному коду**
**`POST /register-by-referral-code/`**  
Регистрация пользователя по реферальному коду.

### ?? **Запрос**
```json
{
  "referral_code": "abc123XYZ"
}
```

### ?? **Ответ (201 Created)**
```json
{
  "detail": "Вы успешно зарегистрированы по реферальному коду."
}
```

## **?? Получение рефералов пользователя**
**`GET /get-referrals/`**  
Получение списка пользователей, зарегистрированных по вашему коду.

### ?? **Ответ (200 OK)**
```json
[
  {
    "id": 1,
    "refer": 3,
    "referred": 5,
    "created_at": "2025-01-01T12:00:00Z"
  }
]
```

---

# ?? **4. Административные функции**
## **?? Получение реферального кода по email**
**`GET /get-referral-code-by-email/`**  
Получение реферального кода пользователя по email.

### ?? **Ответ (200 OK)**
```json
{
  "user": 1,
  "code": "abc123XYZ",
  "expires_at": "2025-12-31T23:59:59Z"
}
```

## **?? Удаление реферального кода по ID**
**`DELETE /delete-referral-code/{id}/`**  
Удаление реферального кода по ID.

### ?? **Ответ (204 No Content)**
```json
{
  "detail": "Реферальный код удален."
}
```

---

# ?? **Запуск проекта**
1?? **Установите зависимости**  
```bash
pip install -r requirements.txt
```
2?? **Примените миграции**  
```bash
python manage.py migrate
```
3?? **Запустите сервер**  
```bash
python manage.py runserver
```
4?? **Откройте API-документацию (Swagger/ReDoc)**
- Swagger: `http://127.0.0.1:8000/swagger/`
- ReDoc: `http://127.0.0.1:8000/redoc/`
